System.register("chunks:///_virtual/GameContent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,r,a,i;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,r=e.Label,a=e._decorator,i=e.Component}],execute:function(){var l,s,c,u,p;o._RF.push({},"bee3fBNNvJPPq9BU/XUHvI3","GameContent",void 0);const{ccclass:b,property:d}=a;e("GameContent",(l=b("GameContent"),s=d(r),l((p=t((u=class extends i{constructor(...e){super(...e),n(this,"label",p,this)}onLoad(){console.log("onLoad is called version 1.0.1"),this.label&&(this.label.string="Inital one updated by thanisthani")}}).prototype,"label",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=u))||c));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameContent.ts","./RemoteEntryLoader.ts"],(function(){return{setters:[null,null],execute:function(){}}}));

System.register("chunks:///_virtual/RemoteEntryLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,s,a,o,i,n,c,l,r,d,f,h,g,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.initializerDefineProperty},function(e){a=e.cclegacy,o=e.Asset,i=e.Label,n=e.ProgressBar,c=e.Button,l=e._decorator,r=e.Component,d=e.native,f=e.assetManager,h=e.sys,g=e.game,p=e.director}],execute:function(){var b,m,u,_,E,v,y,A,U,k,R,M,S;a._RF.push({},"bd9f3f3xF9NvYxZN8P+pIm1","RemoteEntryLoader",void 0);const{ccclass:z,property:C}=l,w=JSON.stringify({packageUrl:"https://thanisthani.github.io/CocosHotUpdate/remote-assets/",remoteVersionUrl:"https://thanisthani.github.io/CocosHotUpdate/remote-assets/version.manifest",remoteManifestUrl:"https://thanisthani.github.io/CocosHotUpdate/remote-assets/project.manifest",version:"1.0.0",assets:{"application.js":{md5:"e56639acc2fadbe3cdd20ed959694c80",size:1269},"assets/internal/cc.config.json":{md5:"6b232e5c1e60eacb53201ee644c96d09",size:2021},"assets/internal/import/06/06585a170.json":{md5:"c06710857fd7f811dc5cf997ad4a3d1b",size:182434},"assets/internal/index.js":{md5:"485ec411d67c319c19f92a77040401f2",size:39548},"assets/main/cc.config.json":{md5:"23e8255f5f19243d47935deb5fc02682",size:1219},"assets/main/import/03/03ec94122.json":{md5:"4c3f0b5e16f7fb428e36bec1deb2bc6e",size:291},"assets/main/import/04/04c8b7cfe.json":{md5:"78b1759be07ef38fb06e6d8e523ce1eb",size:7547},"assets/main/import/1a/1a8f5957-2663-4094-b362-c0e8a33bdb10.json":{md5:"a253314ec7107d95345d7fc89b8d7bb5",size:72},"assets/main/import/20/20835ba4-6145-4fbc-a58a-051ce700aa3e.json":{md5:"a253314ec7107d95345d7fc89b8d7bb5",size:72},"assets/main/import/24/24a704da-2867-446d-8d1a-5e920c75e09d.json":{md5:"a253314ec7107d95345d7fc89b8d7bb5",size:72},"assets/main/import/54/544e49d6-3f05-4fa8-9a9e-091f98fc2ce8.json":{md5:"a253314ec7107d95345d7fc89b8d7bb5",size:72},"assets/main/import/95/951249e0-9f16-456d-8b85-a6ca954da16b.json":{md5:"a253314ec7107d95345d7fc89b8d7bb5",size:72},"assets/main/import/9f/9fd900dd-221b-4f89-8f2c-fba34243c835.json":{md5:"a253314ec7107d95345d7fc89b8d7bb5",size:72},"assets/main/import/ba/ba21476f-2866-4f81-9c4d-6e359316e448.json":{md5:"8bce784945efd554512e8520ec9caccb",size:192},"assets/main/import/fd/fd8ec536-a354-4a17-9c74-4f3883c378c8.json":{md5:"731f44a39ce9377ee6de8ba34edaf039",size:480},"assets/main/index.js":{md5:"3e2f63d1281e7fe0b5c5fa43c3de037e",size:11429},"assets/main/native/1a/1a8f5957-2663-4094-b362-c0e8a33bdb10.png":{md5:"7994ba8943b57af0e4d5ce619c78d85b",size:33008},"assets/main/native/20/20835ba4-6145-4fbc-a58a-051ce700aa3e.png":{md5:"90cf45d059d0408bec327f66eae5764c",size:1082},"assets/main/native/24/24a704da-2867-446d-8d1a-5e920c75e09d.png":{md5:"a4b5953dffeb145b4b70072d91c4052b",size:1140},"assets/main/native/54/544e49d6-3f05-4fa8-9a9e-091f98fc2ce8.png":{md5:"83fcc9912e01ae5411c357651fb8b1cf",size:1114},"assets/main/native/95/951249e0-9f16-456d-8b85-a6ca954da16b.png":{md5:"c06a93f5f1a8a1c6edc4fd8b52e96cbf",size:1050},"assets/main/native/9f/9fd900dd-221b-4f89-8f2c-fba34243c835.png":{md5:"d1118d133683bb4227d5e60c79c846b7",size:1177},"assets/main/native/f6/f68fd36f-24da-4868-82b3-35759975edff.manifest":{md5:"6e2af6a2361e2b98e95b37b90e2c8a43",size:4398},"jsb-adapter/engine-adapter.js":{md5:"d7c197e587a97d0240e760508b009865",size:168637},"jsb-adapter/web-adapter.js":{md5:"2ab62c17fde76578b00670430e4a09bf",size:173353},"main.js":{md5:"e3167153cd7edbda3a1b2550fb24194a",size:840},"src/chunks/bundle.js":{md5:"5090af38add59c9ee667e7aa7630e033",size:976},"src/cocos-js/cc.js":{md5:"2b73eb923056ca6eddef8cbc89ff6f5a",size:1879194},"src/effect.bin":{md5:"4f2f1c1f24379fb11eeff163fb321177",size:5442},"src/import-map.json":{md5:"fc840d99cbb3732367a93c054d1200d4",size:37},"src/settings.json":{md5:"c1c716b026f412733bcbd66e8ad4f64c",size:21284},"src/system.bundle.js":{md5:"f45da0108c6bc0747a05f0f669023838",size:8319}},searchPaths:[]});e("RemoteEntryLoader",(b=z("RemoteEntryLoader"),m=C(o),u=C(i),_=C(n),E=C(c),v=C(c),b((U=t((A=class extends r{constructor(...e){super(...e),s(this,"manifestUrl",U,this),s(this,"statusLabel",k,this),s(this,"progressBar",R,this),s(this,"checkUpdateBtn",M,this),s(this,"retryBtn",S,this),this._updating=!1,this._canRetry=!1,this._storagePath="",this._am=null,this._checkListener=null,this._updateListener=null,this._failCount=0,this.versionCompareHandle=null}checkCb(e){switch(console.log("Check Code: "+e.getEventCode()),e.getEventCode()){case d.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:console.log("No local manifest file found, hot update skipped.");break;case d.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:console.log("Fail to download manifest file.");case d.EventAssetsManager.ERROR_PARSE_MANIFEST:console.log("Fail to download manifest file, hot update skipped.");break;case d.EventAssetsManager.ALREADY_UP_TO_DATE:console.log("Already up to date with the latest remote version.");break;case d.EventAssetsManager.NEW_VERSION_FOUND:this._updating=!1,console.log("New version found, please try to update. ("+Math.ceil(this._am.getTotalBytes()/1024)+"kb)"),this.hotUpdate();break;default:return void console.log("Check code description is not found")}console.log("checkCb is called"),this._am.setEventCallback(null),this._checkListener=null,this._updating=!1}updateCb(e){let t=!1,s=!1;switch(console.log("updateCb is called",e.getEventCode()),e.getEventCode()){case d.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:console.log("No local manifest file found, hot update skipped."),s=!0;break;case d.EventAssetsManager.UPDATE_PROGRESSION:const a=(e.getDownloadedFiles()/e.getTotalFiles()*100).toFixed(2);console.log("Download progress: "+a+"% ("+e.getDownloadedFiles()+" / "+e.getTotalFiles()+")"),console.log("Bytes: "+e.getDownloadedBytes()+" / "+e.getTotalBytes());const o=e.getMessage();o&&console.log("Updated file: "+o);break;case d.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case d.EventAssetsManager.ERROR_PARSE_MANIFEST:console.log("Fail to download manifest file, hot update skipped."),s=!0;break;case d.EventAssetsManager.ALREADY_UP_TO_DATE:console.log("Already up to date with the latest remote version."),s=!0;break;case d.EventAssetsManager.UPDATE_FINISHED:console.log("Update finished successfully! "+e.getMessage()),t=!0;break;case d.EventAssetsManager.UPDATE_FAILED:console.log("Update failed. "+e.getMessage()),this._updating=!1,this._canRetry=!0;break;case d.EventAssetsManager.ERROR_UPDATING:console.log("Asset update error: "+e.getAssetId()+", "+e.getMessage());break;case d.EventAssetsManager.ERROR_DECOMPRESS:console.log("Decompress error: "+e.getMessage());break;default:return void console.log("Update code description is not found")}console.log("Update check completed"),s&&(console.log("Update failed, cleaning up..."),this.cleanupUpdateCallbacks()),t&&(console.log("Update completed successfully, preparing restart..."),this.cleanupUpdateCallbacks(),this.scheduleOnce((()=>{this.restartGame()}),.5)),this._am.setEventCallback(null),this._checkListener=null,this._updating=!1}cleanupUpdateCallbacks(){this._am&&this._am.setEventCallback(null),this._updateListener=null,this._updating=!1}restartGame(){try{console.log("Preparing to restart with updated assets...");const e=d.fileUtils.getSearchPaths(),t=this._am.getLocalManifest();if(t&&t.isLoaded()){const s=t.getSearchPaths();if(console.log("New search paths: ",JSON.stringify(s)),s&&s.length>0){f.releaseAll();const t=[...s,...e];h.localStorage&&h.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(t)),d.fileUtils.setSearchPaths(t),console.log("Updated search paths: ",JSON.stringify(t))}}console.log("Executing game restart in 1 second..."),this.scheduleOnce((()=>{console.log("Restarting game now..."),g.restart?(console.log("game.restart is called"),g.restart()):p.loadScene?(console.log("director.loadScene is called"),p.loadScene(p.getScene().name)):"undefined"!=typeof window&&window.location&&(window.location.reload(),console.log("window.location.reload is called"))}),1)}catch(e){console.error("Error during restart:",e),this.scheduleOnce((()=>{console.log("Attempting fallback restart..."),g.restart()}),2)}}loadCustomManifest(){if(this._am.getState()===d.AssetsManager.State.UNINITED){const e=new d.Manifest(w,this._storagePath);this._am.loadLocalManifest(e,this._storagePath),console.log("Custom manifest loaded successfully")}}retry(){!this._updating&&this._canRetry&&(this._canRetry=!1,console.log("Retrying failed assets..."),this._am.downloadFailedAssets(),this._updating=!0)}hotUpdate(){this._am&&!this._updating?(console.log("Starting hot update..."),this._failCount=0,this._am.checkUpdate(),this._updating=!0,console.log("Hot update started, state:",this._am.getState())):console.log("Cannot start hot update - already updating or AM not available")}onLoad(){if(h.isNative){if(console.log("Initializing hot update system..."),this._storagePath=(d.fileUtils?d.fileUtils.getWritablePath():"/")+"blackjack-remote-asset",console.log("Storage path for remote asset: "+this._storagePath),h.localStorage){const e=h.localStorage.getItem("HotUpdateSearchPaths");if(e)try{const t=JSON.parse(e);d.fileUtils.setSearchPaths(t),console.log("Restored search paths from storage: ",JSON.stringify(t))}catch(e){console.error("Failed to parse stored search paths:",e)}}this.versionCompareHandle=(e,t)=>{console.log("Version comparison: A="+e+", B="+t);const s=e.split("."),a=t.split(".");for(let e=0;e<Math.max(s.length,a.length);e++){const t=parseInt(s[e]||"0"),o=parseInt(a[e]||"0");if(t!==o)return t-o}return 0},this._am=new d.AssetsManager("",this._storagePath,this.versionCompareHandle),this._am.setVerifyCallback(((e,t)=>{const s=t.compressed,a=t.md5,o=t.path;return s?(console.log("Verification passed (compressed): "+o),!0):(console.log("Verification passed: "+o+" ("+a+")"),!0)})),this._am.getState()===d.AssetsManager.State.UNINITED&&(console.log("loadLocalManifest is called"),this.manifestUrl&&this.manifestUrl.nativeUrl?this._am.loadLocalManifest(this.manifestUrl.nativeUrl):this.loadCustomManifest()),this._updateListener=this.updateCb.bind(this),this._am.setEventCallback(this._updateListener),this.setupUI()}else console.warn("Hot update is only available in native builds, loading scene directly")}setupUI(){this.checkUpdateBtn&&this.checkUpdateBtn.node.on("click",this.hotUpdate,this),this.retryBtn&&(this.retryBtn.node.on("click",this.retry,this),this.retryBtn.node.active=!1)}onDestroy(){this._am&&this._am.setEventCallback(null),this._updateListener=null,this._checkListener=null}}).prototype,"manifestUrl",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(A.prototype,"statusLabel",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(A.prototype,"progressBar",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(A.prototype,"checkUpdateBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(A.prototype,"retryBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=A))||y));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});